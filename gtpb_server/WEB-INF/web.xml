<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE web-app 
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" 
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>

    <display-name>GT portalBase</display-name>
    <resource-ref>
      <res-ref-name>jdbc/portalBaseData</res-ref-name>
      <res-type>javax.sql.DataSource</res-type>
      <res-auth>Container</res-auth>
    </resource-ref>
    <description>
      Dynamic database application - a user friendly web application for creating, managing and using databases
    </description>

    <servlet>
      <servlet-name>AppController</servlet-name>
      <description>
        The controller in the MVC design
      </description>
      <servlet-class>com.gtwm.pb.servlets.AppController</servlet-class>
      <load-on-startup>1</load-on-startup>
   	  <init-param>
        <param-name>org.apache.velocity.properties</param-name>
        <param-value>/velocity.properties</param-value>
      </init-param>
    </servlet>
	
    <servlet-mapping>
      <servlet-name>AppController</servlet-name>
      <url-pattern>/AppController.servlet</url-pattern>
    </servlet-mapping>

    <servlet>
      <servlet-name>ReportDownloader</servlet-name>
      <description>
        For serving reports as Excel spreadsheet downloads
      </description>
      <servlet-class>com.gtwm.pb.servlets.ReportDownloader</servlet-class>
      <load-on-startup>0</load-on-startup>
    </servlet>
	
    <servlet-mapping>
      <servlet-name>ReportDownloader</servlet-name>
      <url-pattern>/ReportDownloader.servlet</url-pattern>
    </servlet-mapping>
    
    <servlet>
        <servlet-name>ssi</servlet-name>
        <description>
          To support server-side includes
        </description>
        <servlet-class>
          org.apache.catalina.ssi.SSIServlet
        </servlet-class>
        <init-param>
          <param-name>buffered</param-name>
          <param-value>1</param-value>
        </init-param>
        <init-param>
          <param-name>debug</param-name>
          <param-value>0</param-value>
        </init-param>
        <init-param>
          <param-name>expires</param-name>
          <param-value>666</param-value>
        </init-param>
        <init-param>
          <param-name>isVirtualWebappRelative</param-name>
          <param-value>0</param-value>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>ssi</servlet-name>
        <url-pattern>*.shtml</url-pattern>
    </servlet-mapping>    

    <session-config>
      <!-- 360 = 6 hours - set the session timeout to a long time so the app won't break if the user leaves it on screen for a few hours without doing anything -->
      <!-- 240 = 4 hours-->
      <session-timeout>360</session-timeout>
    </session-config>

    <security-constraint>
      <web-resource-collection>
        <web-resource-name>portalBase Application</web-resource-name>
        <url-pattern>*.servlet</url-pattern>
      </web-resource-collection>
      <auth-constraint>
        <role-name>gtpbeveryone</role-name>
      </auth-constraint>
    </security-constraint>
    <login-config>
      <auth-method>FORM</auth-method>
      <form-login-config>
	    <form-login-page>/website/index.shtml</form-login-page>
	    <form-error-page>/website/login_error.htm</form-error-page>
	  </form-login-config>
	</login-config>

</web-app>