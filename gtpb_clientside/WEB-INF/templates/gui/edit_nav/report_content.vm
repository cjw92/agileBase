#set($sessionTable = $sessionData.getTable())
#set($internalTableName = $sessionTable.getInternalTableName())
<div class="related block centrebox" href="AppController.servlet?return=gui/edit_nav/edit&set_table=$internalTableName&save_new_record=true">
  ##<span class="new"><img src="resources/toolbar/new.png"> add new</span>
  <textarea>ge</textarea>
</div>
#foreach($row in $data)
  #set($thisValues = $row.get(0))
  #set($rowColours = $row.get(3))
  #set($thisUniqueId = $row.get(2))
  <div class="related block" href="AppController.servlet?return=gui/edit_nav/edit&set_table=$internalTableName&set_row_id=$thisUniqueId">
    #foreach($cell in $thisValues)
      #set($cellNumber = $foreach.count - 1)
      #set($colour = $rowColours.get($cellNumber))
      #set($field = $fields.get($cellNumber).get(1))
      #set($fieldCategory = $field.getFieldCategory().toString())
      #set($image = false)
      #if($fieldCategory == "FILE")
        #set($fileValue = $viewTools.getFileValueTool($cell))
        #if($fileValue.isImage())
          #set($srcUrl = "/agileBase/uploads/$internalTableName/$field.getInternalFieldName()/$thisUniqueId/$fileValue.40.$fileValue.getExtension()")
          <img src="$srcUrl" style="float:left"/>
          #set($image = true)
        #end
      #end
      #set($style="")
      #set($class="")
      #if($colour && $colour !="") #set($style="background-color:$colour; ") #set($class="colored") #end
      #if($cell && (!$image) && ($cell != ""))
        #set($printoutSetting = $field.getPrintoutSetting())
        #if($fieldCategory == "CHECKBOX")
          #if($cell == "true")
            <span style="$style" class="cell $class">$field</span>
          #end
        #elseif($printoutSetting == "NAME_AND_VALUE")
          <span class="fieldname">$field</span>: <span style="$style" class="cell $class">$cell</span><br>
        #else
          <span style="$style" class="cell $class">$cell</span>,
        #end
      #end
    #end
  </div>
#end